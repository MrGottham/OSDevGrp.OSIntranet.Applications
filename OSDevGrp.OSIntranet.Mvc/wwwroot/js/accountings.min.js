!function(n){n.fn.extend({getDefaultAccountingNumber:function(){var t=n("#accountingOptionsAccountingNumber").val();return 0===t.length?null:parseInt(t)},getActiveAccountingNumber:function(){var t=n("#loadedAccountingCollection").children("[data-accounting-number]");if(0===t.length)return null;var c=null;return n.each(t,function(){n(this).hasClass("active")&&null===c&&(c=parseInt(n(this).data("accounting-number")))}),c},getActiveOrDefaultAccountingNumber:function(){var t=n().getActiveAccountingNumber();return null!=t?t:n().getDefaultAccountingNumber()},getActiveAccountingUrl:function(){var t=n("#loadedAccountingCollection").children("[data-url]");if(0===t.length)return null;var c=null;return n.each(t,function(){n(this).hasClass("active")&&null===c&&(c=n(this).data("url"))}),c},newAccounting:function(){alert("OS Debug: newAccounting")},getAccounting:function(n){alert("OS Debug: getAccounting, accountingUrl="+n)},refreshAccountings:function(t){if(0!==n("#loadedAccountingCollection").length){var c=n().getActiveOrDefaultAccountingNumber(),e=decodeURI(t);e=null==c?e.substr(0,e.indexOf("?")):e.replace("{accountingNumber}",c),n().startLoadingAccountings(encodeURI(e))}},startLoadingAccountings:function(t){n.each(n("#accountingCollection"),function(){n().startAccountingCollectionObserver(this),n.each(n(this).children("#loadedAccountingCollection"),function(){n(this).data("url",t),n().replaceWithPartialViewFromUrl(this)})})},startAccountingCollectionObserver:function(t){new MutationObserver(n().accountingCollectionCallback).observe(t,{childList:!0})},accountingCollectionCallback:function(t,c){if(0!==t.length){var e=n(t[0].target).find("#loadedAccountingCollection");if(0!==e.length){c.disconnect(),n.each(e,function(){n.each(n(this).find("a"),function(){n(this).on("click",function(t){t.preventDefault(),n(this).tab("show")}),n(this).on("shown.bs.tab",function(t){n().getAccounting(n(t.target).data("url"))})})});var i=n().getActiveAccountingUrl();null!=i&&n().getAccounting(i)}else n().handleUrlInstantLoading(n(document))}}}),n(document).ready(function(){n().startAccountingCollectionObserver(document.getElementById("accountingCollection"))})}(jQuery);