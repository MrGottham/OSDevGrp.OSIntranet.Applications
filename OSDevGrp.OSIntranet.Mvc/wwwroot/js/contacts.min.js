!function(t){t.fn.extend({getFilter:function(){return t("#contactOperationsFilter").val()},getCountryCode:function(){return t("#contactOperationsCountryCode").val()},newContact:function(t){alert("OS Debug: newContact, countryCode="+t)},getContact:function(n){var e=t().getPresentContactElement();null!==e&&(n=decodeURI(n).replace("{countryCode}",t().getCountryCode()),t(e).data("url",encodeURI(n)),t.each(t(e).parent(),function(){t().startPresentingContactObserver(this)}),t().replaceWithPartialViewFromUrl(e))},refreshContacts:function(n){0!==t("#loadedContactCollection").length&&(t.each(t("#contactOperationsFilter"),function(){t(this).val("")}),t().startLoadingContacts(n))},searchContacts:function(n,e){var o=decodeURI(e);o=null==n||0===n.length?o.substr(0,o.indexOf("?")):o.replace("{filter}",n),t().startLoadingContacts(encodeURI(o))},startLoadingContacts:function(n){t().setReadOnly("#contactOperationsFilter",!0),t().setDisabled("#contactOperationsSearch",!0),t.each(t("#contactCollection"),function(){t().startContactCollectionObserver(this),t.each(t(this).children("#loadedContactCollection"),function(){t(this).data("url",n),t().replaceWithPartialViewFromUrl(this)})})},startContactCollectionObserver:function(n){new MutationObserver(t().contactCollectionCallback).observe(n,{childList:!0})},contactCollectionCallback:function(n,e){if(0!==n.length){var o=t(n[0].target).find("#loadedContactCollection");0!==o.length?(e.disconnect(),t().setReadOnly("#contactOperationsFilter",!1),t().setDisabled("#contactOperationsSearch",!1),t.each(o,function(){t.each(t(this).find("a"),function(){t(this).on("click",function(n){n.preventDefault(),t(this).tab("show")}),t(this).on("shown.bs.tab",function(n){t().getContact(t(n.target).data("url"))})})})):t().handleUrlInstantLoading(t(document))}},getPresentContactElement:function(){var n=t("#rightContent");n.is(":hidden")&&(n=t("#leftContent"));var e=null,o=0;return t.each(t(n).children("div"),function(){0===o?(e=t(this),o++):t(this).remove()}),e},startPresentingContactObserver:function(n){new MutationObserver(t().presentingContactCallback).observe(n,{childList:!0})},presentingContactCallback:function(n,e){if(0!==n.length){var o=t(n[0].target).find("[data-url]");0!==o.length?t.each(o,function(){t().replaceWithPartialViewFromUrl(this)}):e.disconnect()}}}),t(document).ready(function(){t().startContactCollectionObserver(document.getElementById("contactCollection"))})}(jQuery);